<?xml version ="1.0"?>
<openerp>
	<data>
	
<!-- ===========================Sale Order Inherit=============================	-->
	
		<record id="project_form_inherit_base" model="ir.ui.view">
            <field name="name">project.task.form</field>
            <field name="model">project.task</field>
            <field name="inherit_id" ref="project.view_task_form2"/>
            <field name="arch" type="xml">
	            <xpath expr="//field[@name='planned_hours']" position="after">
		            <field name='depends_on' />
		            <field name='days_needed' />
	            </xpath>
	            <xpath expr="//field[@name='date_start']" position="replace">
		            <field name='state' invisible="1" />
		            <field name='date_start' attrs="{'readonly':[('state','=','execute')]}"/>
	            </xpath>
	            <xpath expr="//field[@name='date_end']" position="replace">
		            <field name='date_end' attrs="{'readonly':[('state','=','execute')]}"/>
	            </xpath>
	            <xpath expr="//field[@name='partner_id']" position="replace">
		            <field name='partner_id' attrs="{'readonly':[('state','=','execute')]}"/>
	            </xpath>
	            <xpath expr="//field[@name='priority']" position="replace">
		            <field name='priority' attrs="{'readonly':[('state','=','execute')]}"/>
	            </xpath>
	            <xpath expr="//field[@name='date_deadline']" position="replace">
		            <field name='date_deadline' attrs="{'readonly':[('state','=','execute')]}"/>
	            </xpath>
	            <xpath expr="//field[@name='name']" position="replace">
		            <field name='name' attrs="{'readonly':[('state','=','execute')]}"/>
	            </xpath>
	            <xpath expr="//field[@name='project_id']" position="replace">
		            <field name='project_id' attrs="{'readonly':[('state','=','execute')]}"/>
	            </xpath>
	            
	        </field>
	    </record>
	    
	    
	    <record id="project_view_inherit" model="ir.ui.view">
            <field name="name">project.project.form</field>
            <field name="model">project.project</field>
            <field name="inherit_id" ref="project.edit_project"/>
            <field name="arch" type="xml">
	            <xpath expr="//button[@name='set_done']" position="after">
		            <button name="set_cancel" string="Cancel Project" type="object" states="initiate,plan,open,pending" groups="base.group_user"/>
		            <button name="set_done" string="Close Project" type="object" states="plan,open,execute,pending" groups="base.group_user"/>
		            <button name="start_project" string="Initiate Project" states="draft" type="object" class="oe_highlight" groups="base.group_user"/>
		            <button name="planning" string="Plan" type="object" states="initiate" class="oe_highlight" groups="base.group_user"/>
		            <button name="execute" string="Execute" type="object" states="plan" class="oe_highlight" groups="base.group_user"/>
	            </xpath>
<!--	            <xpath expr="/form/sheet[@string='Project']" position='replace'>-->
<!--	           	 <form string="Project" version="7.0" attrs="{'readonly':[('state','=','execute')]}"/>-->
<!--	            -->
<!--	            </xpath>-->
	            <xpath expr="/form/sheet/notebook/page[@string='Project Stages']" position="after">
	            	<page string='Initiation' attrs="{'invisible':[('state','in',['draft'])]}">
	            	<group>
	            		<!-- <field name='solution_review' attrs="{'readonly':[('state','=','execute')]}"/>
	            		<field name='project' attrs="{'readonly':[('state','=','execute')]}"/>
	            		<field name='finance_document' attrs="{'readonly':[('state','=','execute')]}"/>
	            		<field name='solution' attrs="{'readonly':[('state','=','execute')]}"/> -->
	            		
	            		<notebook>
				    <page string="Solution Review">
				    <group>
				      <group colspan="4" col="4">
					  	<field name="sr_upload" filename="filename1"/>
							<div class="oe_right oe_button_box" name="buttons" groups="base.group_user">
	                         <!--button name="send_mail_approve_doc" string="Send Mail" states="sent" type="object" attrs="{'invisible':[('state_for_appr','in',['sent_for_approval','approval'])]}"/>
	                       	 <button name="approve_by_admin" string="Approve" type="object" attrs="{'invisible':[('state_for_appr','not in',['sent_for_approval'])]}"/-->
	                       	 
	                       	 <button name="send_mail_sr" string="Send Mail" states="sent" type="object" attrs="{'invisible':[('state_for_sr','in',['sent_for_approval','approved'])]}"/>
	                       	 <button name="approve_by_admin_sr" string="Approve" type="object" attrs="{'invisible':[('state_for_sr','not in',['sent_for_approval'])]}"/>
	                    	</div>
	                    	
	                    </group>
                    </group>
                   	<group colspan="4" col="4">
                   	  <group>
	                    <field name="sr_id" invisible="1"/>
	                    <field name="sr_approve_id" on_change="onchange_sr_approve_id(sr_approve_id)"/>
						<field name="state_for_sr"/>
						<field name="comments_sr" class="oe_inline" placeholder="Place your comment..."/>
					  </group>
					  <group>
						<!--field name="datas_fname" invisible="1"/-->
						<field name="datas_project_charter_fname" invisible="1"/>
					  </group>
					</group>
				    </page>
				    <page string="Kick-off">
					  <group>
					   <group colspan="4" col="4">
					  	<field name="ko_upload" filename="filename2"/>
							<div class="oe_right oe_button_box" name="buttons" groups="base.group_user">
	                         <!--button name="send_mail_approve_doc" string="Send Mail" type="object" attrs="{'invisible':[('state_for_appr_project','in',['sent_for_approval','approval'])]}"/>
	                         <button name="approve_by_pro_admin" string="Approve" type="object" attrs="{'invisible':[('state_for_appr_project','not in',['sent_for_approval'])]}"/-->
                    		
                    		<button name="send_mail_ko" string="Send Mail" states="sent" type="object" attrs="{'invisible':[('state_for_ko','in',['sent_for_approval','approved'])]}"/>
	                       	<button name="approve_by_admin_ko" string="Approve" type="object" attrs="{'invisible':[('state_for_ko','not in',['sent_for_approval'])]}"/>
                    		
                    		</div>
                  
                    	</group>
                       </group>
                   	   <group colspan="4" col="4">
                   	   <group>
	                   	    <field name="ko_id" invisible="1"/>
	                   	    <field name="ko_approve_id" on_change="onchange_ko_approve_id(ko_approve_id)"/>
						 	<field name="state_for_ko"/>
						 	<field name="comments_ko" class="oe_inline" placeholder="Place your comment..."/>
					 	</group>
					 	<group>
							<!--field name="datas_fname" invisible="1"/-->
							<field name="datas_project_charter_fname" invisible="1"/>
					    </group>
					  </group>
				    </page>
				    <page string="Project Charter">
				    <group>
				      <group colspan="4" col="4">
					  	<field name="pc_upload" filename="filename3"/>
							<div class="oe_right oe_button_box" name="buttons" groups="base.group_user">
	                         <!--button name="send_mail_approve" string="Send Mail" states="sent" type="object" attrs="{'invisible':[('state_for_appr','in',['sent_for_approval','approval'])]}"/>
	                       	 <button name="approve_by_admin" string="Approve" type="object" attrs="{'invisible':[('state_for_appr','not in',['sent_for_approval'])]}"/-->
	                    	
	                    	 <button name="send_mail_pc" string="Send Mail" states="sent" type="object" attrs="{'invisible':[('state_for_pc','in',['sent_for_approval','approved'])]}"/>
	                       	 <button name="approve_by_admin_pc" string="Approve" type="object" attrs="{'invisible':[('state_for_pc','not in',['sent_for_approval'])]}"/>
	                    	
	                    	</div>
	                    	
	                    </group>
                    </group>
                   	<group colspan="4" col="4">
                   	  <group>
	                    <field name="pc_id" invisible="1"/>
	                    <field name="pc_approve_id" on_change="onchange_pc_approve_id(pc_approve_id)"/>
						<field name="state_for_pc"/>
						<field name="comments_pc" class="oe_inline" placeholder="Place your comment..."/>
					  </group>
					  <group>
						<!--field name="datas_fname" invisible="1"/-->
						<field name="datas_project_charter_fname" invisible="1"/>
					  </group>
					</group>
				    </page>
				    <page string="Finance Documents">
				    <group>
				      <group colspan="4" col="4">
					  	<field name="fd_upload" filename="filename4"/>
							<div class="oe_right oe_button_box" name="buttons" groups="base.group_user">
	                         <!--button name="send_mail_approve" string="Send Mail" states="sent" type="object" attrs="{'invisible':[('state_for_appr','in',['sent_for_approval','approval'])]}"/>
	                       	 <button name="approve_by_admin" string="Approve" type="object" attrs="{'invisible':[('state_for_appr','not in',['sent_for_approval'])]}"/-->
	                    	
	                    	 <button name="send_mail_fd" string="Send Mail" states="sent" type="object" attrs="{'invisible':[('state_for_fd','in',['sent_for_approval','approved'])]}"/>
	                       	 <button name="approve_by_admin_fd" string="Approve" type="object" attrs="{'invisible':[('state_for_fd','not in',['sent_for_approval'])]}"/>
	                    	
	                    	</div>
	                    	
	                    </group>
                    </group>
                   	<group colspan="4" col="4">
                   	  <group>
	                    <field name="fd_id" invisible="1"/>
	                    <field name="fd_approve_id" on_change="onchange_fd_approve_id(fd_approve_id)"/>
						<field name="state_for_fd"/>
						<field name="comments_fd" class="oe_inline" placeholder="Place your comment..."/>
					  </group>
					  <group>
						<!--field name="datas_fname" invisible="1"/-->
						<field name="datas_project_charter_fname" invisible="1"/>
					  </group>
					</group>
				    </page>
<!--					  <page string="Finance Document">-->
<!--					  <group>-->
<!--					 	 <field name="datas_finance_document" filename="datas_finance_document_fname"/>-->
<!--					 	 <field name="approve_finance_document_id" widget="selection"/>-->
<!--					 	 <field name="datas_finance_document_fname" invisible="1"/>-->
<!--					  </group>-->
<!--					  <field name="comment_finance" class="oe_inline" placeholder="Place your comment..."/>-->
<!--					    </page>-->
					</notebook>
	            	</group>
	            	</page>
	            	
	            	<page string='Planning' attrs="{'invisible':[('state','in',['draft','initiate'])]}">
		            	<group>
		            		<field name='training_plan' attrs="{'readonly':[('state','=','execute')]}"/>
		            		<field name='technical_plan' attrs="{'readonly':[('state','=','execute')]}"/>
		            		<field name='implementation_plan' attrs="{'readonly':[('state','=','execute')]}"/>
		            	</group>
	            	</page>
	            	
	            </xpath>
	            
	            <xpath expr="/form/sheet/notebook/page/group/group/field[@name='planned_hours']" position="before">
	            		<field name='pnl'/>
	            </xpath>
	            
	        </field>
	    </record>
	    
	    
	    
	    <record id="action_project_form_view_inherit" model="ir.actions.act_window">
			<field name="name">project.project</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">project.project</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="view_id" ref="project_view_inherit"/>
			<field name="help">This help for the Student Enrollment Action</field>
		</record>
	    
	    <record model="ir.ui.view" id="project.view_project_kanban">
            <field name="name">project.project.kanban</field>
            <field name="model">project.project</field>
            <field name="arch" type="xml">
                <kanban version="7.0" class="oe_background_grey">
                    <field name="effective_hours"/>
                    <field name="planned_hours"/>
                    <field name="name"/>
                    <field name="members"/>
                    <field name="use_tasks"/>
                    <field name="user_id"/>
                    <field name="date"/>
                    <field name="color"/>
                    <field name="task_count"/>
                    <field name="alias_id"/>
                    <field name="alias_domain"/>
                    <field name="doc_count"/>
                    <templates>
                        <t t-name="kanban-box">
                            <div t-attf-class="oe_kanban_color_#{kanban_getcolor(record.color.raw_value)} oe_kanban_card oe_kanban_project oe_kanban_global_click">
                                <div class="oe_dropdown_toggle oe_dropdown_kanban" groups="base.group_user">
                                    <span class="oe_e">Ã­</span>
                                    <ul class="oe_dropdown_menu">
                                        <t t-if="widget.view.is_action_enabled('edit')"><li><a type="edit">Project Settings</a></li></t>
                                        <t t-if="widget.view.is_action_enabled('delete')"><li><a type="delete">Delete</a></li></t>
                                        <li><ul class="oe_kanban_colorpicker" data-field="color"/></li>
                                    </ul>
                                </div>
                                <div class="oe_kanban_content">

                                    <h4><field name="name"/></h4>
                                    <div class="oe_kanban_project_list">
                                       <a t-if="record.use_tasks.raw_value" name="%(project.act_project_project_2_project_task_all)d" type="action" style="margin-right: 10px">  
                                            <span t-if="record.task_count.raw_value gt 1"><field name="task_count"/> Tasks</span>
                                            <span t-if="record.task_count.raw_value lt 2"><field name="task_count"/> Task</span>
                                        </a>
                                    </div>
                                    <div class="oe_kanban_project_list">
                                        <a t-if="record.doc_count.raw_value" name="attachment_tree_view" type="object" style="margin-right: 10px"> <field name="doc_count"/> Documents</a>
                                    </div>
                                    <div class="oe_kanban_footer_left">
                                        <span groups="project.group_time_work_estimation_tasks">
                                            <span class="oe_e">R</span>
                                            <t t-esc="Math.round(record.effective_hours.raw_value)"/>/<t t-esc="Math.round(record.planned_hours.raw_value)"/> <field name="company_uom_id"/>
                                        </span>
                                        <span t-if="record.date.raw_value">
                                            <span class="oe_e">N</span>
                                            <field name="date"/>
                                        </span>
                                    </div>
                                    <div class="oe_kanban_project_avatars">
                                        <t t-foreach="record.members.raw_value.slice(0,11)" t-as="member">
                                            <img t-att-src="kanban_image('res.users', 'image_small', member)" t-att-data-member_id="member"/>
                                        </t>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>
	    
	    
	    
	    
	    <record id="action_project_form_view_inherit" model="ir.actions.act_window">
			<field name="name">project.project</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">project.project</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="view_id" ref="project_view_inherit"/>
			<field name="help">This help for the Student Enrollment Action</field>
		</record>
		
		<record id="open_view_project_all1" model="ir.actions.act_window">
            <field name="name">Projects</field>
            <field name="res_model">project.project</field>
            <field name="view_type">form</field>
            <field name="domain">[]</field>
            <field name="view_mode">kanban,tree,form,gantt</field>
            <field name="view_id" ref="project.view_project_kanban"/>
            <field name="search_view_id" ref="project.view_project_project_filter"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                  Click to start a new project.
                </p><p>
                  Projects are used to organize your activities; plan
                  tasks, track issues, invoice timesheets. You can define
                  internal projects (R&amp;D, Improve Sales Process),
                  private projects (My Todos) or customer ones.
                </p><p>
                  You will be able collaborate with internal users on
                  projects or invite customers to share your activities.
                </p>
            </field>
        </record>
        
        <menuitem action="open_view_project_all1" id="project.menu_projects" name="Projects" parent="project.menu_project_management" sequence="1"/>
	    
	    
	    
	    
	    
	    
	    
	    
	    
	</data>
</openerp>
